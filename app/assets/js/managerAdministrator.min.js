"use strict";function updateStatus(e,a){let t,n,s,r=$.ajax({method:"POST",url:"ManagerAdministrator/updateStatus",data:{id:e,jobCode:a},dataType:"JSON"});r.done(function(e){managerTableInstance.ajax.reload(),t=e.message.title,n=e.message.description,s=e.message.type}),r.fail(function(e){if(!e.hasOwnProperty("responseJSON"))return t="Request Execution",n="An error occurred while executing the request",void(s="danger");if(!e.responseJSON.data)return t=e.responseJSON.title,n=e.responseJSON.description,void(s=e.responseJSON.type);let a="";$.each(e.responseJSON.data.validation,function(e,t){a+=null!==t.message?`${t.message} <br>`:""}),t=e.responseJSON.message.title,n=a,s=e.responseJSON.message.type}),r.always(function(){import("./helpers.min.js").then(e=>e.buildToast(t,n,s))})}function insertManager(){let e,a,t,n=$("#form__insert--manager"),s=$("#button__submit--manager"),r={start:"Insert",processing:'<i class="me-2 fa-solid fa-spinner fa-spin-pulse"></i>Procesando'},i=$.ajax({method:"POST",url:"ManagerAdministrator/insertManager",data:n.serializeArray(),dataType:"JSON",beforeSend:function(){s.html(r.processing).prop("disabled",!0)}});i.done(function(n){managerTableInstance.ajax.reload(),e=n.message.title,a=n.message.description,t=n.message.type,modalInsertManager.hide(),import("./helpers.min.js").then(n=>n.buildToast(e,a,t)),s.html(r.start).prop("disabled",!1)}),i.fail(function(n){return n.hasOwnProperty("responseJSON")?n.responseJSON.data?($.each(n.responseJSON.data.validation,function(e,a){let t=$(`input[name='${e}']`),n=`<small class="invalid-feedback fw-bold">${a.message}</small>`;t.parent().find("small").remove(),t.removeClass("is-invalid is-valid").addClass(a.result),"is-invalid"===a.result&&t.parent().append(n)}),void s.html(r.start).prop("disabled",!1)):(e=n.responseJSON.title,a=n.responseJSON.description,t=n.responseJSON.type,modalInsertManager.hide(),import("./helpers.min.js").then(n=>n.buildToast(e,a,t)),void s.html(r.start).prop("disabled",!1)):(e="Request Execution",a="An error occurred while executing the request",t="danger",modalInsertManager.hide(),import("./helpers.min.js").then(n=>n.buildToast(e,a,t)),void s.html(r.start).prop("disabled",!1))})}const managerTable=$("#table__data--manager");$.fn.dataTable.ext.errMode="throw";const managerTableInstance=managerTable.DataTable({ordering:!1,ajax:{url:"ManagerAdministrator/getManagers",type:"GET"},dom:"Bfrtip",buttons:[{extend:"pageLength",text:'<i class="fa-solid fa-ellipsis-vertical"></i>',titleAttr:"Rows per Page",className:"btn-dark"},{text:'<i class="fa-solid fa-arrows-rotate"></i>',titleAttr:"Sync",action:function(e,a){a.ajax.reload(null,!1)},className:"btn-dark"},{text:'<i class="me-2 fa-solid fa-file-csv"></i>',titleAttr:"Export CSV",extend:"csv",charset:"UTF-8",bom:!0,className:"btn-dark"}],orderClasses:!1,columns:[{data:"id"},{data:"jobCode"},{data:"fullName"},{data:"isActive"},{data:"actions"}],columnDefs:[{targets:[0,1,3],className:"text-center"},{targets:3,data:null,render:function(e,a,t){return`\n                    <span class="badge bg-${"1"===t.isActive?"success":"dark"}">\n                        ${"1"===t.isActive?"Active":"Inactive"}\n                    </span>\n                `}},{targets:4,data:null,render:function(e,a,t){return`\n                    <button type="button" class="mx-1 btn btn-sm btn-link badge button__update--status"\n                            title="${"1"===t.isActive?"Disabled":"Enabled"}">\n                        <i class="${"1"===t.isActive?"text-success":"text-dark"} fa-solid fa-toggle-${"1"===t.isActive?"on":"off"} fa-lg"></i>\n                    </button>\n                `}}],language:{url:"/herramientas/config/datatables-language.json"},responsive:!0});managerTable.on("page.dt",function(){$("html,body").animate({scrollTop:managerTable.closest("body").offset().top},100)}),managerTableInstance.on("click",".button__update--status",function(){let e=managerTableInstance.row($(this).parents()).data();updateStatus(e.id,e.jobCode)});const modalInsertManager=new bootstrap.Modal(document.getElementById("modal__insert--manager"),{});document.getElementById("button__insert--manager").addEventListener("click",()=>{modalInsertManager.show()}),document.getElementById("modal__insert--manager").addEventListener("show.bs.modal",()=>{let e=document.forms["form__insert--manager"].getElementsByTagName("input");for(let a of e){a.value="",a.classList.remove("is-valid","is-invalid");let e=a.nextElementSibling;null!==e&&e.remove()}import("./helpers.min.js").then(e=>e.validateForm())}),document.getElementById("button__submit--manager").addEventListener("click",insertManager);