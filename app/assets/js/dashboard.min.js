"use strict";function getUserInformation(){let e=$.ajax({url:"Dashboard/getUserInformation",method:"GET",dataType:"JSON"});e.done(function(e){$("#data__person--icon-gender").addClass("HOMBRE"===e.data.person.gender?"fa-person":"fa-person-dress"),$("#data__person--name").text(e.data.person.fullName),$.each(e.data.employee,function(e,t){$(`#data__employee--${e}`).text(t)}),$.each(e.data.corporateDistribution,function(e,t){$(`#data__corporateDistribution--${e}`).text(null!==t.id?t.fullName:"-")});let t=e.data.user.email,a=e.data.user.phoneExtension;$("#data__user--email").text(t),$("#data__user--phoneExtension").text(a),null!==t&&$("#input__user--email").val(t),null!==a&&$("#input__user--phoneExtension").val(a),t&&a||modal.show();let n=$("#div--clients-tags"),s=e.data.clients.length;n.html("");for(let t=0;t<s;t++)n.append(`<span class="mx-1 my-1 badge rounded-pill bg-dark">${e.data.clients[t]}</span>`)}),e.fail(function(e){let t,a,n;if(!e.responseJSON.data)return t=e.responseJSON.title,a=e.responseJSON.description,n=e.responseJSON.type,void import("./helpers.min.js").then(e=>e.buildToast(t,a,n))})}function updateInfo(){let e,t,a,n=$.ajax({method:"POST",url:"Dashboard/updateUserContactData",data:form.serializeArray(),dataType:"JSON",beforeSend:function(){buttonSubmit.html(buttonStates.processing).prop("disabled",!0)}});n.done(function(n){e=n.message.title,t=n.message.description,a=n.message.type,import("./helpers.min.js").then(n=>n.buildToast(e,t,a)),getUserInformation()}),n.fail(function(n){return n.hasOwnProperty("responseJSON")?n.responseJSON.data?void $.each(n.responseJSON.data.validation,function(e,t){let a=$(`input[name='${e}']`),n=`<small class="invalid-feedback fw-bold">${t.message}</small>`;a.parent().find("small").remove(),a.removeClass("is-invalid is-valid").addClass(t.result),"is-invalid"===t.result&&a.parent().append(n)}):(e=n.responseJSON.title,t=n.responseJSON.description,a=n.responseJSON.type,void import("./helpers.min.js").then(n=>n.buildToast(e,t,a))):(e="Request Execution",t="An error occurred while executing the request",a="danger",void import("./helpers.min.js").then(n=>n.buildToast(e,t,a)))}),n.always(function(e){modal.hide(),buttonSubmit.html(buttonStates.start).prop("disabled",!1)})}const modal=new bootstrap.Modal(document.getElementById("modal__update--user-info"),{});getUserInformation();const buttonsUpdate=document.querySelectorAll(".button__update--user-info");buttonsUpdate.forEach(e=>e.addEventListener("click",()=>{modal.show()})),import("./helpers.min.js").then(e=>e.validateForm());const form=$("#form__update--user-info"),buttonSubmit=$("#button__submit--user-info"),buttonStates={start:"Actualizar",processing:'<i class="me-2 fa-solid fa-spinner fa-spin-pulse"></i>Procesando'};buttonSubmit.on("click",updateInfo);