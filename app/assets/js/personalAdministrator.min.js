"use strict";function updateCatalog(){let e,t,a,s=$.ajax({method:"POST",url:"Staff/updateStaffCatalog/manually",dataType:"JSON",beforeSend:function(){buttonUpdate.html(buttonStates.processing).prop("disabled",!0)}});s.done(function(s){personTableInstance.ajax.reload(),employeeTableInstance.ajax.reload(),e=s.message.title,t=s.message.description,a=s.message.type}),s.fail(function(s){if(!s.hasOwnProperty("responseJSON"))return e="Request Execution",t="An error occurred while executing the request",a="danger",void import("./helpers.min.js").then(s=>s.buildToast(e,t,a));s.responseJSON.data||(e=s.responseJSON.title,t=s.responseJSON.description,a=s.responseJSON.type,import("./helpers.min.js").then(s=>s.buildToast(e,t,a)))}),s.always(function(){buttonUpdate.html(buttonStates.start).prop("disabled",!1),import("./helpers.min.js").then(s=>s.buildToast(e,t,a))})}const personTable=$("#table__data--person");$.fn.dataTable.ext.errMode="throw";const personTableInstance=personTable.DataTable({ordering:!1,ajax:{url:"PersonalAdministrator/getPersons",type:"GET"},dom:"Bfrtip",buttons:[{extend:"pageLength",text:'<i class="fa-solid fa-ellipsis-vertical"></i>',titleAttr:"Rows per Page",className:"btn-dark"},{text:'<i class="fa-solid fa-arrows-rotate"></i>',titleAttr:"Sync",action:function(e,t){t.ajax.reload(null,!1)},className:"btn-dark"},{text:'<i class="me-2 fa-solid fa-file-csv"></i>',titleAttr:"Export CSV",extend:"csv",charset:"UTF-8",bom:!0,className:"btn-dark"}],orderClasses:!1,columns:[{data:"id"},{data:"firstSurname"},{data:"secondSurname"},{data:"firstName"},{data:"gender"},{data:"isActive"}],columnDefs:[{targets:[0,4,5],className:"text-center"},{targets:4,data:null,render:function(e,t,a){return`\n                    ${"HOMBRE"===a.gender?'<i class="fa-solid fa-person" style="color: var(--bs-blue)"></i>':'<i class="fa-solid fa-person-dress" style="color: var(--bs-pink)"></i>'}\n                `}},{targets:5,data:null,render:function(e,t,a){return`\n                    <span class="badge bg-${"1"===a.isActive?"success":"dark"}">\n                        ${"1"===a.isActive?"Active":"Inactive"}\n                    </span>\n                `}}],language:{url:"/herramientas/config/datatables-language.json"},responsive:!0});personTable.on("page.dt",function(){$("html,body").animate({scrollTop:personTable.closest("section").offset().top},100)});const employeeTable=$("#table__data--employee"),employeeTableInstance=employeeTable.DataTable({ordering:!1,processing:!0,ajax:{url:"PersonalAdministrator/getEmployees",type:"GET"},dom:"Bfrtip",buttons:[{extend:"pageLength",text:'<i class="fa-solid fa-ellipsis-vertical"></i>',titleAttr:"Rows per Page",className:"btn-dark"},{text:'<i class="fa-solid fa-arrows-rotate"></i>',titleAttr:"Sync",action:function(e,t){t.ajax.reload(null,!1)},className:"btn-dark"},{text:'<i class="me-2 fa-solid fa-file-csv"></i>',titleAttr:"Export CSV",extend:"csv",charset:"UTF-8",bom:!0,className:"btn-dark"}],orderClasses:!1,columns:[{data:"personId"},{data:"jobCode"},{data:"tenuredDirectorCode"},{data:"directorCode"},{data:"managerCode"},{data:"supervisorCode"},{data:"colorRibbon"},{data:"position"},{data:"shift"},{data:"branch"},{data:"isActive"}],columnDefs:[{targets:[0,1,2,3,4,5,6,7,8,9],className:"text-center"},{targets:2,data:null,render:function(e,t,a){return""===a.tenuredDirectorCode?"-":a.tenuredDirectorCode}},{targets:3,data:null,render:function(e,t,a){return""===a.directorCode?"-":a.directorCode}},{targets:4,data:null,render:function(e,t,a){return""===a.managerCode?"-":a.managerCode}},{targets:5,data:null,render:function(e,t,a){return""===a.supervisorCode?"-":a.supervisorCode}},{targets:6,data:null,render:function(e,t,a){return`<i class='fa-solid fa-award\n                           ribbon-${a.colorRibbon} ${"white"===a.colorRibbon?"bg-secondary":""}'></i>`}},{targets:10,data:null,render:function(e,t,a){return`\n                    <span class="badge bg-${"1"===a.isActive?"success":"dark"}">\n                        ${"1"===a.isActive?"Active":"Inactive"}\n                    </span>\n                `}}],language:{url:"/herramientas/config/datatables-language.json"},responsive:!0});employeeTable.on("page.dt",function(){$("html,body").animate({scrollTop:employeeTable.closest("section").offset().top},100)});const buttonUpdate=$("#button__update--catalog"),buttonStates={start:'<i class="me-2 fa-solid fa-gears"></i>Update',processing:'<i class="me-2 fa-solid fa-spinner fa-spin-pulse"></i>Procesando'};buttonUpdate.on("click",updateCatalog),document.getElementById("button__download--log").addEventListener("click",()=>{let e=document.createElement("a");e.href=window.location.origin+"/herramientas/log/staff/log.txt",e.download="staff_log.txt",document.body.appendChild(e),e.click(),document.body.removeChild(e)});